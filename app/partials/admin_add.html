<div ui-view="nav2"></div>
<div class="content">
<h3>
	Add New Listing
</h3>

<article class="listing-frm detail-admin">
	<form name="add-listing" ng-submit="ctrl.addListing(add-listing.$valid)" novalidate>

		<div class="form-group" ng-class="{ 'has-error': add-listing.name.$touched && add-listing.name.$invalid }">
			<label for="name">Company Name</label>
			<input type="text" class="form-control" name="name" ng-model="ctrl.name" ng-minlength="2" ng-maxlength="50" required>
			<div class="help-block" ng-messages="add-listing.name.$error && add-listing.name.$dirty" ng-show="add-listing.name.$touched" style="color:maroon" role="alert">
		        <span ng-message="minlength">Your name is too short.</span>
		        <span ng-message="maxlength">Your name is too long.</span>
		        <span ng-message="required">Your name is required.</span>
   			</div>
		</div>
		<div class="form-group" ng-class="{ 'has-error': add-listing.url.$touched && add-listing.url.$invalid }">
			<label for="url">Website Url</label>
			<input type="url" class="form-control" name="url" placeholder="http://www." ng-model="ctrl.url" ng-minlength="5" ng-maxlength="50" required>
			<div class="help-block" ng-messages="add-listing.url.$error" ng-show="add-listing.url.$touched">
		        <p ng-message="minlength">Your url is too short.</p>
		        <p ng-message="maxlength">Your url is too long.</p>
		        <p ng-message="required">Your url is required.</p>
		        <p ng-message="url">Your url is not formatted correctly.</p>
   			</div>
		</div>
		<div class="form-group" ng-class="{ 'has-error': add-listing.email.$touched && add-listing.email.$invalid }">
			<label for="email">Email Address</label>
			<input type="email" class="form-control" name="email" placeholder = "you@domain.com"ng-model="ctrl.email" ng-minlength="7" ng-maxlength="25" required>
			<div class="help-block" ng-messages="add-listing.email.$error" ng-show="add-listing.email.$touched">
		        <p ng-message="minlength">Your email is too short.</p>
		        <p ng-message="maxlength">Your email is too long.</p>
		        <p ng-message="required">Your email is required.</p>
		        <p ng-message="email">Your email is not formatted correctly.</p>
   			</div>
		</div>
		<div class="form-group" ng-class="{ 'has-error': add-listing.phone.$touched && add-listing.phone.$invalid }">
			<label for="phone">Phone Number  (optional)</label>
			<input type="text" class="form-control" name="phone" ng-model="ctrl.phone" ng-minlength="7" ng-maxlength="13">
			<div class="help-block" ng-messages="add-listing.phone.$error" ng-show="add-listing.phone.$touched">
		        <p ng-message="minlength">Your email is too short.</p>
		        <p ng-message="maxlength">Your email is too long.</p>
		        <p ng-message="required">Your email is required.</p>
		        <p ng-message="email">Your email is not formatted correctly.</p>
   			</div>
		</div>
		<div class="form-group" ng-class="{ 'has-error': add-listing.country.$touched && add-listing.country.$invalid }">
			<label for="country">Country</label>
			<select ng-options="option.value as option.label for option in ctrl.countries" class="form-control" ng-model="ctrl.country" name="country" placeholder="Choose country" required>
			</select>
			<div class="help-block" ng-messages="add-listing.country.$error" ng-show="add-listing.country.$touched">
		        <p ng-message="required">Country is required.</p>
   			</div>
		</div>
<!-- 		<div class="form-group" ng-class="{ 'has-error': add-listing.name.$touched && add-listing.name.$invalid }">
			<label for="state">State</label>
			<select ng-options="option.value as option.label for option in ctrl.states" class="form-control" ng-model="ctrl.state" name="state" required>
			</select>
		</div> -->
		<div class="form-group" ng-class="{ 'has-error': add-listing.city.$touched && add-listing.city.$invalid }">
			<label for="city">City</label>
			<select ng-options="option.value as option.label for option in ctrl.cities|filter:{country:ctrl.country}" class="form-control" ng-model="ctrl.city" name="city" required>
			</select>
			<div class="help-block" ng-messages="add-listing.city.$error" ng-show="add-listing.city.$touched">
		        <p ng-message="required">City is required.</p>
   			</div>
		</div>
		<div class="form-group" ng-class="{ 'has-error': add-listing.address.$touched && add-listing.address.$invalid }">
			<label for="address">Address</label>
			<input type="text" class="form-control" name="address" ng-model="ctrl.address" ng-minlength="10" ng-maxlength="35" required>
			<p class="help-block">Please provide exact address that will be recognized by Google Maps</p>
			<div class="help-block" ng-messages="add-listing.address.$error" ng-show="add-listing.address.$touched">
		        <p ng-message="minlength">Your address is too short.</p>
		        <p ng-message="maxlength">Your address is too long.</p>
		        <p ng-message="required">Your address is required.</p>
   			</div>
		</div>
		<div class= "form-group" ng-class="{ 'has-error': add-listing.free.$touched && add-listing.free.$invalid }">
			<label for="free">Free option available?</label>
			<input type="checkbox" value="" ng-model="ctrl.free" name="free">
			Yes
			<p class="help-block">Do you offer any free walks?</p>
		</div>
		<div class="form-group" ng-class="{ 'has-error': add-listing.category.$touched && add-listing.category.$invalid }">
			<label for="category">Category</label>
			<select ng-options="option.value as option.label for option in ctrl.categories" class="form-control" ng-model="ctrl.category" name="category">
			</select>
			<div class="help-block" ng-messages="add-listing.category.$error" ng-show="add-listing.category.$touched">
		        <p ng-message="required">Category is required.</p>
   			</div>
		</div>
<!-- 		<div class="form-group">
		  <button type="file" ngf-select="uploadFiles($file, $invalidFiles)"
          	accept="image/*" ngf-max-height="1000" ngf-max-size="1MB">
      		Select File</button>
  			<br><br>
  			File:
		  	<div style="font:smaller">{{f.name}} {{errFile.name}} {{errFile.$error}} {{errFile.$errorParam}}
		     	 <span class="progress" ng-show="f.progress >= 0">
		       	   	<div style="width:{{f.progress}}%"  
		            	ng-bind="f.progress + '%'"></div>
		      	</span>
  			</div>     
  			{{errorMsg}}
		</div> -->
		
<!-- 		  <div class="form-group">
    <label for="exampleInputFile">File input</label>
    <input type="file" id="exampleInputFile">
    <p class="help-block">Example block-level help text here.</p>
  </div> -->
		<div class="form-group" ng-class="{ 'has-error': add-listing.description.$touched && add-listing.description.$invalid }">
			<label for="description">Description</label>
			<textarea type="text" class="form-control" name="description" ng-model="ctrl.description" ng-minlength="5" ng-maxlength="300" required></textarea>
			<p class="help-block">Maximum length of description is 300 characters.</p>
			<div class="help-block" ng-messages="add-listing.description.$error" ng-show="add-listing.description.$touched">
		        <p ng-message="minlength">Your description is too short.</p>
		        <p ng-message="maxlength">Your description is too long.</p>
		        <p ng-message="required">A description is required.</p>
   			</div>
		</div>
		<div>
			<button type="submit" class="btn btn-primary" ng-disabled="add-listing.$invalid">Submit New Listing</button>
			<button type="button" ui-sref="dashboard" class="btn btn-primary">Cancel</button>
		</div>
	</form>
</article>
</div>